<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Converts an existing table into a known location table — table_initializeExisting • MazamaLocationUtils</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Converts an existing table into a known location table — table_initializeExisting"><meta property="og:description" content="An existing table may have much of the data that is needed
for a known location table. This function accepts an incoming table and
searches for required columns:

locationID
locationName
longitude
latitude
elevation
countryCode
stateCode
countyName
timezone
houseNumber
street
city
postalCode


The longitude and latitude columns are required but all others
are optional.
If any of these optional columns are found, they will be used and the often
slow and sometimes slightly inaccurate steps to generate that information
will be skipped for locations that have non-missing data. Any additional
columns of information that are
not part of the required core metadata will be retained.
This method skips the assignment of columns like elevation and all
address related fields that require web service requests.
Compared to initializing a brand new table and populating it one record at a
time, this is a much faster way of creating a known location table from a
pre-existing table of metadata."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MazamaLocationUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/MazamaLocationUtils.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/MazamaScience/MazamaLocationUtils/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Converts an existing table into a known location table</h1>
    <small class="dont-index">Source: <a href="https://github.com/MazamaScience/MazamaLocationUtils/blob/HEAD/R/table_initializeExisting.R" class="external-link"><code>R/table_initializeExisting.R</code></a></small>
    <div class="hidden name"><code>table_initializeExisting.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An existing table may have much of the data that is needed
for a known location table. This function accepts an incoming table and
searches for required columns:</p>
<ul><li><p>locationID</p></li>
<li><p>locationName</p></li>
<li><p>longitude</p></li>
<li><p>latitude</p></li>
<li><p>elevation</p></li>
<li><p>countryCode</p></li>
<li><p>stateCode</p></li>
<li><p>countyName</p></li>
<li><p>timezone</p></li>
<li><p>houseNumber</p></li>
<li><p>street</p></li>
<li><p>city</p></li>
<li><p>postalCode</p></li>
</ul><p>The <code>longitude</code> and <code>latitude</code> columns are required but all others
are optional.</p>
<p>If any of these optional columns are found, they will be used and the often
slow and sometimes slightly inaccurate steps to generate that information
will be skipped for locations that have non-missing data. Any additional
columns of information that are
not part of the required core metadata will be retained.</p>
<p>This method skips the assignment of columns like <code>elevation</code> and all
address related fields that require web service requests.</p>
<p>Compared to initializing a brand new table and populating it one record at a
time, this is a much faster way of creating a known location table from a
pre-existing table of metadata.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">table_initializeExisting</span><span class="op">(</span></span>
<span>  locationTbl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stateDataset <span class="op">=</span> <span class="st">"NaturalEarthAdm1"</span>,</span>
<span>  countryCodes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distanceThreshold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geodesic"</span>, <span class="st">"haversine"</span>, <span class="st">"vincenty"</span>, <span class="st">"cheap"</span><span class="op">)</span>,</span>
<span>  precision <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>locationTbl</dt>
<dd><p>Tibble of known locations. This input tibble need not be a
standardized "known location" table with all required columns. Missing
columns will be added.</p></dd>


<dt>stateDataset</dt>
<dd><p>Name of spatial dataset to use for determining state
codes, Default: 'NaturalEarthAdm1'</p></dd>


<dt>countryCodes</dt>
<dd><p>Vector of country codes used to optimize spatial
searching. (See ?MazamaSpatialUtils::getStateCode())</p></dd>


<dt>distanceThreshold</dt>
<dd><p>Distance in meters.</p></dd>


<dt>measure</dt>
<dd><p>One of "haversine" "vincenty", "geodesic", or "cheap"
specifying desired method of geodesic distance calculation. See
<code><a href="https://rdrr.io/pkg/geodist/man/geodist.html" class="external-link">?geodist::geodist</a></code>.</p></dd>


<dt>precision</dt>
<dd><p><code>precision</code> argument passed on to <a href="location_createID.html">location_createID</a>.</p></dd>


<dt>verbose</dt>
<dd><p>Logical controlling the generation of progress messages.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Known location tibble with the specified metadata columns. Any
locations whose circles (as defined by <code>distanceThreshold</code>) overlap will
generate warning messages.</p>


<p>It is incumbent upon the user to address overlapping locations by one of:</p>


<ol><li><p>reduce the distanceThreshold until no overlaps occur</p></li>
<li><p>assign one of the overlapping locations to the other location</p></li>
</ol></div>
    <div id="note">
    <h2>Note</h2>
    <p>The measure <code>"cheap"</code> may be used to speed things up depending on
the spatial scale being considered. Distances calculated with
<code>measure = "cheap"</code> will vary by a few meters compared with those
calculated using <code>measure = "geodesic"</code>.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

